{% for features in site.data.features %}
{% if features.type == 1 %}
<style>
    *,
    *::after,
    *::before {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }


    .slider-container {
        display: grid;
        place-items: center;
        width: 450px;
        height: 450px;
    }

    .container-div {
        display: grid;
        place-content: center;
        position: relative;
        overflow: hidden;
        --position: 50%;
    }

    .image-container {
        max-width: 800px;
        max-height: 550px;
        aspect-ratio: 1/1;
        overflow: hidden;
        border-radius: 0;
    }

    .slider-image {
        width: 100%;
        height: 100%;
        border-radius: 0;
    }

    .slider-container:hover .slider-button {
        opacity: 1;
    }

    .image-before {
        position: absolute;
        inset: 0;
        width: var(--position);
        filter: grayscale(100%);
        overflow: hidden;
    }

    .slider {
        position: absolute;
        inset: 0;
        cursor: pointer;
        opacity: 0;
        width: 100%;
        height: 100%;
    }

    .slider:focus-visible~.slider-button {
        outline: 5px solid black;
        outline-offset: 3px;
    }

    .slider-line {
        position: absolute;
        inset: 0;
        width: .1rem;
        height: 100%;
        background-color: #fff;
        left: var(--position);
        transform: translateX(-50%);
        pointer-events: none;
    }

    .slider-button {
        position: absolute;
        background-color: #fff;
        color: black;
        padding: .5rem;
        border-radius: 100vw;
        display: grid;
        place-items: center;
        top: 50%;
        left: var(--position);
        transform: translate(-50%, -50%);
        pointer-events: none;
        /* z-index: 100; */
        box-shadow: 1px 1px 1px hsl(0, 50%, 2%, .5);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease-in-out;
    }

    code {
        display: flex;
        justify-content: center;
        max-width: 100%;
        background-color: #1c1c1c;
        color: #fff;
    }
</style>
<section>
    <div class="container flex">
        <div class="text ">
            <div style="display: flex;">
                <img src="{{ features.logoLightMode }}" data-logo-for-light="{{ features.logoLightMode }}"
                    data-logo-for-dark="{{ features.logoDarkMode }}" id="logo-dark-light"
                    alt="{{ features.logoDescription}}" style="height: 4rem;" loading="lazy" />
                <span>
            </div>
            <h2>{{ features.title }}</h2>
            <p>{{ features.description }}</p>
            <div class="button-para">
                <a href="/catalog" class="highlight">View Catalog</a>
            </div>
        </div>
        <div class="image flex" style="flex-flow: column wrap;">
            <div align="center" style="margin-top: 3rem;">
                <button id="video-modal" class="link recording-link" style="width:100%"><img
                        src="{{ features.videoPoster }}" loading="lazy" class="screenshot"></button>
                <p style="font-size: 1rem;margin:0rem;padding:0rem;color:#666;font-style: italic;">(excerpt: patterns
                    in-action)</p>
                {% include video-modal.html
                title="Service Mesh Patterns"
                video="assets/images/patterns/service-mesh-patterns-clip.mov" %}
            </div>
        </div>
    </div>
</section>

{% elsif features.type == 2 %}
<section>
    <div class="container flex">
        <div class="text ">
            <h2>{{ features.title }}</span></h2>
            <p> {{ features.description }}
            </p>
        </div>
        <div class="image">
            <a href="{{ features.image }}" data-fancybox="images" data-caption="{{ features.imageDescription }}">
                <img class="screenshot" src="{{ features.image }}" alt="{{ features.imageDescription }}"
                    loading="lazy" />
            </a>
        </div>
    </div>
</section>

{% elsif features.type == 3 %}
<section>
    <div class="container flex">
        <div class="text ">
            <img src="{{ features.logo }}" style="max-width:30%;position:relative;float:left;
                    margin-right:20px;margin-bottom: 10px;" alt="{{ features.imageDescription }}" loading="lazy" />
            <h2>{{ features.title }}</h2>
            <p>{{ features.description }}</p>
        </div>
        <div class="image flex">
            <a style="width: 100%;" href="{{ features.image }}" data-fancybox="images"
                data-caption="{{ features.imageDescription }}">
                <img src="{{ features.image }}" alt="{{ features.imageDescription }}" class="screenshot"
                    loading="lazy" />
            </a>
        </div>
    </div>
</section>

{% elsif features.type == 4 %}
<section>
    <div class="container flex">
        <div class="text ">
            <h2>{{ features.title }}</h2>
            <p>{{ features.description }}</p>
        </div>
        <div class="image flex">
            <a style="width: 100%;" href="{{ features.image }}" data-fancybox="images"
                data-caption="Webassembly based Envoy Filters">
                <img src="{{ features.image }}" class="screenshot" loading="lazy" />
            </a>
        </div>
    </div>
</section>

{% elsif features.type == 5 %}
<section>
    <div class="container flex">
        <div class="text ">
            <img src="{{ features.logo }}" style="max-width:30%;position:relative;float:left;
                    margin-right:20px;margin-bottom: 10px;" alt="Unified policy engine" loading="lazy" />
            <h2>{{ features.title }}</h2>
            <p>{{ features.description }}</p>
        </div>
        <div class="image flex">
            <a style="width: auto;" href="{{ features.image }}" data-fancybox="images">
                <img src="{{ features.image }}" style="max-width:100%" alt="{{ features.imageDescription }}"
                    loading="lazy" />
            </a>
        </div>
    </div>
</section>

{% elsif features.type == 6 %}
<section>
    <div class="container flex">
        <div class="text ">
            <img src="{{ features.logo }}" style="max-width:20%;position:relative;float:left;
                    margin-right:20px;margin-bottom: 10px;" loading="lazy" />
            <h2>{{ features.title }}</h2>
            <p>{{ features.description }}
            <ul style="line-height: 1.5em;height: auto;text-align: left; color: var(--color-secondary-light)">
                {% for listItem in features.list %}
                <li>{{ listItem }}</li>
                {% endfor %}
            </ul>
            </p>
        </div>
        
        <div class="slider-container">
            <div class="container-div">
                <div class="image-container">
                    <code class="image-before slider-image">
                        apiVersion: apps/v1
                        kind: Deployment
                        metadata: 
                        name: backend
                        spec:
                        selector:
                        matchLabels:
                        app: server
                        tier: backend
                        replicas: 1
                        template:
                        metadata:
                        labels:
                        app: server
                        tier: backend
                        spec: 
                        containers:
                        - name: server
                        image: nginx
                        - name: http
                        containerPort: 80
                        ---
                        ....
                        ----
        
                    </code>
                    <img src="{{ features.image }}" class="slider-image" />
                </div>
                <input type="range" min="0" max="100" value="50" aria-label="Percentage of before photo shown"
                    class="slider" />
                <div class="slider-line" aria-hidden="true"></div>
                <div class="slider-button" aria-hidden="true">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="16"
                            font-weight="bold">
                            &lt; &gt;
                        </text>
                    </svg>
                </div>
            </div>

        
         </div>
    </div>
</section>

{% elsif features.type == 7 %}
<section>
    <div class="container flex">
        <div class="text ">
            <h2>{{ features.title }}</h2>
            <p>{{ features.description }}
            <ul style="line-height: 1.5em;height: auto;text-align: left; color: var(--color-secondary-light)">
                {% for listItem in features.list %}
                <li>{{ listItem }}</li>
                {% endfor %}
            </ul>
            </p>
        </div>
        <div class="image">
            <a href="{{ features.imageURL }}" data-fancybox="images" data-caption="{{ features.imageDescription }}">
                <img src="{{ features.image }}" alt="{{ features.imageDescription }}" class="screenshot"
                    loading="lazy" />
            </a>
        </div>
    </div>
</section>

{% elsif features.type == 8 %}
<section>
    <div class="container flex">
        <div class="text ">
            <h2>{{ features.title }}</h2>
            <p>{{ features.description }}</p>
        </div>
        <div class="image flex">
            <a style="width: auto;" href="{{ features.imageURL }}" data-fancybox="images"
                data-caption="{{ features.imageDescription }}">
                <img src="{{ features.image }}" style="max-width:100%" alt="{{ features.imageDescription }}"
                    loading="lazy" />
            </a>
        </div>
    </div>
</section>
{% endif %}
{% endfor %}